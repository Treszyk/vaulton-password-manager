<div class="fixed inset-0 z-[100] overflow-y-auto bg-black/70 backdrop-blur-xl animate-fade-in">
  <div class="min-h-[100svh] w-full flex items-center justify-center p-4">
    <div
      class="w-full max-w-lg p-6 rounded-3xl overlay-card animate-slide-up bg-black border border-zinc-900 shadow-2xl"
    >
      <div class="flex flex-col items-center text-center mb-5">
        <div class="w-14 h-14 rounded-full bg-orange-500/10 flex items-center justify-center mb-3">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="28"
            height="28"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="text-orange-500"
          >
            <path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z" />
            <path d="M12 9v4" />
            <path d="M12 17h.01" />
          </svg>
        </div>

        <h2 class="text-xl font-bold uppercase tracking-[0.2em] text-zinc-100 mb-2">
          Recovery Info
        </h2>

        <div class="p-3 rounded-xl bg-orange-500/5 border border-orange-500/20 text-center w-full">
          <p class="text-xs text-orange-200/80 font-medium leading-relaxed">
            <span
              class="text-orange-400 font-bold block mb-0.5 uppercase tracking-wider text-[0.65rem]"
              >TRIPLE CHECK</span
            >
            You need this to log in on new devices. <br />
            We <span class="text-orange-400 font-bold">cannot</span> recover it for you.
          </p>
        </div>
      </div>

      <div class="space-y-4 mb-6">
        <div class="space-y-1.5">
          <label class="text-[0.65rem] font-bold uppercase tracking-[0.1em] text-zinc-400 ml-1"
            >Account ID</label
          >
          <div class="relative group">
            <div
              class="w-full pl-4 pr-12 py-3 bg-zinc-950 border border-zinc-800 rounded-xl text-zinc-300 font-mono text-sm break-all"
            >
              {{ accountId() }}
            </div>
            <button
              (click)="copyToClipboard(accountId(), 'id')"
              class="absolute top-1/2 -translate-y-1/2 right-2 p-1.5 rounded-lg bg-zinc-900 border border-zinc-800 text-zinc-400 hover:text-white hover:border-zinc-700 transition-all"
            >
              @if (copiedState()['id']) {
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="16"
                  height="16"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="text-green-500"
                >
                  <path d="M20 6 9 17l-5-5" />
                </svg>
              } @else {
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="16"
                  height="16"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <rect width="14" height="14" x="8" y="8" rx="2" ry="2" />
                  <path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2" />
                </svg>
              }
            </button>
          </div>
          <p class="text-[0.65rem] text-orange-400/80 font-medium ml-1">
            <span class="font-bold uppercase tracking-wider">Notice:</span>
            Your ONLY identifier. Save it.
          </p>
        </div>

        <div class="space-y-1.5">
          <label class="text-[0.65rem] font-bold uppercase tracking-[0.1em] text-zinc-400 ml-1"
            >Recovery Key</label
          >
          <div class="relative group">
            <div
              class="w-full pl-4 pr-12 py-3 bg-zinc-950 border border-zinc-800 rounded-xl text-zinc-300 font-mono text-sm break-all"
            >
              {{ recoveryKey() }}
            </div>
            <button
              (click)="copyToClipboard(recoveryKey(), 'rk')"
              class="absolute top-1/2 -translate-y-1/2 right-2 p-1.5 rounded-lg bg-zinc-900 border border-zinc-800 text-zinc-400 hover:text-white hover:border-zinc-700 transition-all"
            >
              @if (copiedState()['rk']) {
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="16"
                  height="16"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="text-green-500"
                >
                  <path d="M20 6 9 17l-5-5" />
                </svg>
              } @else {
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="16"
                  height="16"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <rect width="14" height="14" x="8" y="8" rx="2" ry="2" />
                  <path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2" />
                </svg>
              }
            </button>
          </div>
          <p class="text-[0.65rem] text-orange-400/80 font-medium ml-1">
            <span class="font-bold uppercase tracking-wider">Warning:</span>
            Required to restore access if you forget your password.
          </p>
        </div>

        <label
          class="flex items-center gap-3 p-3 rounded-xl border border-zinc-800/50 bg-zinc-900/40 cursor-pointer hover:bg-zinc-900/60 transition-colors group"
        >
          <div class="relative flex items-center justify-center flex-shrink-0">
            <input
              type="checkbox"
              [(ngModel)]="acknowledged"
              class="peer size-5 appearance-none rounded-md border-2 border-zinc-700 bg-zinc-950 checked:border-orange-500 checked:bg-orange-500 transition-all cursor-pointer"
            />
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="3"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="absolute pointer-events-none opacity-0 peer-checked:opacity-100 text-white size-3"
            >
              <path d="M20 6 9 17l-5-5" />
            </svg>
          </div>
          <div class="flex-1 flex items-center">
            <span
              class="text-xs font-semibold text-zinc-300 group-hover:text-zinc-200 transition-colors"
            >
              I have saved my Account ID and Recovery Key.
            </span>
          </div>
        </label>
      </div>

      <div
        class="relative h-14 w-full rounded-xl overflow-hidden group cursor-pointer select-none border transition-all duration-200"
        [class.opacity-50]="!acknowledged()"
        [class.pointer-events-none]="!acknowledged()"
        [class.border-zinc-700]="!isHolding()"
        [class.bg-zinc-950]="!isHolding()"
        [class.hover:border-orange-500]="!isHolding() && acknowledged()"
        [class.hover:bg-zinc-900]="!isHolding() && acknowledged()"
        [class.border-orange-500]="isHolding()"
        [class.bg-zinc-950]="isHolding()"
        [class.unstable-shake]="isHolding()"
        [style.--shake-intensity]="shakeIntensity()"
        (mousedown)="startHold()"
        (mouseup)="cancelHold()"
        (mouseleave)="cancelHold()"
        (touchstart)="$event.preventDefault(); startHold()"
        (touchend)="cancelHold()"
        (touchcancel)="cancelHold()"
        role="button"
        tabindex="0"
      >
        <div
          class="absolute inset-y-0 left-0 bg-orange-600 transition-all duration-75 ease-linear"
          [style.width.%]="progress()"
        ></div>

        <div
          class="absolute inset-0 flex items-center justify-center gap-2 pointer-events-none text-white font-black uppercase text-[13px] md:text-sm tracking-tight md:tracking-widest z-10 px-4"
        >
          <span [class.animate-pulse]="isHolding()">
            {{ buttonLabel() }}
          </span>
          @if (!isHolding()) {
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2.5"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="w-4 h-4 transition-transform group-hover:translate-x-1"
            >
              <path d="M5 12h14" />
              <path d="m12 5 7 7-7 7" />
            </svg>
          }
        </div>
      </div>
    </div>
  </div>
</div>
